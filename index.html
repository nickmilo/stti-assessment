<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STTI Assessment - Discover Your Sensemaking Type</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'Canela Deck';
            src: url('CanelaDeck-Regular-Trial.otf') format('opentype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Canela Deck';
            src: url('CanelaDeck-Medium-Trial.otf') format('opentype');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --lyt-purple: #b9adff;
            --lyt-purple-deep: #8272d0;
            --lyt-yellow: #fcf601;
            --lyt-yellow-muted: #c7c400;
            --lyt-cyan: #5dbcd2;
            --lyt-pink: #d669bc;
            --lyt-green: #67c073;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body { 
            font-family: 'Space Grotesk', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f0 100%);
            color: #2d3748;
            line-height: 1.6;
        }

        .header {
            text-align: center;
            padding: 2rem 1rem;
            background: linear-gradient(135deg, var(--lyt-purple) 0%, var(--lyt-cyan) 100%);
            color: white;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="30" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="60" cy="70" r="1" fill="rgba(255,255,255,0.1)"/><line x1="20" y1="20" x2="60" y2="70" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><line x1="60" y1="70" x2="80" y2="30" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></svg>') repeat;
            opacity: 0.3;
        }

        .header h1 {
            font-family: 'Canela Deck', Helvetica, sans-serif;
            font-size: 2.5rem;
            font-weight: 500;
            margin: 0;
            position: relative;
            z-index: 1;
            text-align: left;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .email-capture {
            text-align: center;
            background: white;
            padding: 3rem 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(185, 173, 255, 0.1);
            border: 2px solid rgba(185, 173, 255, 0.2);
        }

        .email-capture h2 {
            font-family: 'Canela Deck', sans-serif;
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 1rem;
        }

        .email-capture p {
            color: #666;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .email-input {
            width: 100%;
            max-width: 400px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            margin-bottom: 1.5rem;
            font-family: 'Space Grotesk', sans-serif;
        }

        .email-input:focus {
            outline: none;
            border-color: var(--lyt-purple);
            box-shadow: 0 0 0 3px rgba(185, 173, 255, 0.1);
        }

        .start-btn {
            background: linear-gradient(135deg, var(--lyt-purple) 0%, var(--lyt-cyan) 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            font-family: 'Space Grotesk', sans-serif;
        }

        .start-btn:hover {
            transform: translateY(-2px);
        }

        .start-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .assessment {
            background: white;
            padding: 3rem 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(185, 173, 255, 0.1);
            border: 2px solid rgba(185, 173, 255, 0.2);
        }

        .progress-section {
            margin-bottom: 2rem;
        }

        .progress-text {
            text-align: center;
            font-family: 'DM Mono', monospace;
            color: var(--lyt-purple-deep);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .progress-bar-container {
            width: 100%;
            height: 8px;
            background: #f1f5f9;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--lyt-purple) 0%, var(--lyt-cyan) 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-section {
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--lyt-purple-deep);
            text-align: center;
            margin-bottom: 2rem;
            line-height: 1.5;
            font-family: 'Space Grotesk', sans-serif;
        }

        .answers {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .answer-btn {
            padding: 1rem 1.5rem;
            border: 2px solid;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Space Grotesk', sans-serif;
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            background: white;
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translate(-50%, -50%);
        }

        .answer-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .sd {
            border-color: var(--lyt-purple-deep);
            color: var(--lyt-purple-deep);
        }
        .sd::before { background: var(--lyt-purple-deep); }
        .sd:hover { color: white; }

        .d {
            border-color: var(--lyt-yellow-muted);
            color: var(--lyt-yellow-muted);
        }
        .d::before { background: var(--lyt-yellow-muted); }
        .d:hover { color: white; }

        .a {
            border-color: var(--lyt-cyan);
            color: var(--lyt-cyan);
        }
        .a::before { background: var(--lyt-cyan); }
        .a:hover { color: white; }

        .sa {
            border-color: var(--lyt-pink);
            color: var(--lyt-pink);
        }
        .sa::before { background: var(--lyt-pink); }
        .sa:hover { color: white; }

        .answer-btn span {
            position: relative;
            z-index: 1;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.5rem;
            border: 1px solid var(--lyt-purple);
            background: white;
            color: var(--lyt-purple);
            border-radius: 50%;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--lyt-purple);
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            border-color: #ccc;
            color: #ccc;
        }

        .profile-banner {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f0 100%);
            border-radius: 12px;
            border-left: 4px solid var(--lyt-purple);
            padding: 0.8rem 1.5rem;
            margin: 0.25rem 0;
            text-align: center;
        }

        .banner-main-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            color: var(--lyt-purple-deep);
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .banner-profile-code {
            font-family: 'Canela Deck', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--lyt-purple-deep);
            margin: 0 0 0.2rem 0;
        }

        .banner-subtitle {
            font-family: 'Canela Deck', sans-serif;
            font-size: 1.8rem;
            color: var(--lyt-purple-deep);
            margin: 0;
            font-weight: 400;
        }

        .results {
            text-align: left;
            padding: 1.5rem 2rem 3rem 2rem;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(185, 173, 255, 0.1);
            border: 2px solid rgba(185, 173, 255, 0.2);
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .profile-main-title {
            font-family: 'DM Mono', monospace;
            font-size: 1.3rem;
            color: var(--lyt-purple-deep);
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .profile-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
            align-items: start;
        }

        .profile-info {
            flex: 1;
        }

        .profile-code {
            font-family: 'Canela Deck', serif;
            font-size: 2.5rem;
            font-weight: 500;
            color: var(--lyt-purple-deep);
            margin: 0 0 0.5rem 0;
        }
        
        .profile-subtitle {
            display: inline-block;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1rem;
            color: #2d3748;
            background-color: rgba(185, 173, 255, 0.2);
            border: 2px solid var(--lyt-purple);
            padding: 0.4rem 1.5rem;
            border-radius: 24px;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }
        
        .orientation-pill {
            display: inline-block;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            color: #4a5568;
            background-color: rgba(156, 163, 175, 0.15);
            border: 1px solid #9ca3af;
            padding: 0.3rem 1.2rem;
            border-radius: 18px;
            margin-bottom: 0.5rem;
            font-weight: 600;
            width: auto;
            align-self: flex-start;
        }
        
        .tendency-pill {
            display: inline-block;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            color: #4a5568;
            padding: 0.3rem 1.2rem;
            border-radius: 18px;
            margin-bottom: 0.5rem;
            font-weight: 600;
            border: 1px solid;
            width: auto;
            align-self: flex-start;
        }
        
        .architect-pill {
            background-color: rgba(93, 188, 210, 0.15);
            border-color: var(--lyt-cyan);
        }
        
        .gardener-pill {
            background-color: rgba(103, 192, 115, 0.15);
            border-color: var(--lyt-green);
        }

        .tendency-pills-container {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .secondary-tendency {
            opacity: 0.4;
        }

        .secondary-archetype {
            opacity: 0.4;
            font-size: 0.8rem;
            padding: 0.25rem 1rem;
            border-radius: 16px;
        }
        
        .archetype-pills-container {
            margin-bottom: 0.5rem;
        }
        
        .archetype-pills {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .archetype-pills.secondary-row {
            margin-bottom: 0;
        }
        
        .archetype-pill {
            display: inline-block;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            color: #4a5568;
            padding: 0.3rem 1.2rem;
            border-radius: 18px;
            font-weight: 600;
            border: 1px solid;
        }
        
        .inner-guide-pill {
            background-color: rgba(252, 246, 1, 0.2);
            border-color: var(--lyt-yellow-muted);
        }
        
        .synthesizer-pill {
            background-color: rgba(93, 188, 210, 0.15);
            border-color: var(--lyt-cyan);
        }
        
        .producer-pill {
            background-color: rgba(214, 105, 188, 0.15);
            border-color: var(--lyt-pink);
        }
        
        .creative-pill {
            background-color: rgba(185, 173, 255, 0.2);
            border-color: var(--lyt-purple);
        }

        .archetype-description {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
            margin: 0;
        }

        .archetype-title {
            font-family: 'DM Mono', monospace;
            text-decoration: underline;
            color: var(--lyt-purple-deep);
            margin-bottom: 0.5rem;
            margin-top: 0.5rem;
            font-size: 1.1rem;
        }

        .archetype-subtitle {
            font-family: 'Space Grotesk', sans-serif;
            font-style: italic;
            color: var(--lyt-cyan);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .second-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
            align-items: start;
        }

        .tendency-section {
            display: flex;
            flex-direction: column;
        }

        .tendency-description {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
            text-align: left;
        }

        .tendency-title {
            font-family: 'DM Mono', monospace;
            text-decoration: underline;
            color: var(--lyt-purple-deep);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .tendency-subtitle {
            font-family: 'Space Grotesk', sans-serif;
            font-style: italic;
            color: var(--lyt-cyan);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .westerner-section {
            display: flex;
            flex-direction: column;
        }

        .westerner-title {
            font-family: 'DM Mono', monospace;
            text-decoration: underline;
            color: var(--lyt-purple-deep);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .westerner-subtitle {
            font-family: 'Space Grotesk', sans-serif;
            font-style: italic;
            color: var(--lyt-cyan);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .westerner-description {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
            text-align: left;
        }

        .overwhelmed-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #fff8f0 0%, #fff0f8 100%);
            border-radius: 12px;
            border-left: 4px solid var(--lyt-pink);
        }

        .stuck-unstuck-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f0fff8 0%, #f0f8ff 100%);
            border-radius: 12px;
            border-left: 4px solid var(--lyt-cyan);
        }

        .prompts-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #fffef0 0%, #f8fff0 100%);
            border-radius: 12px;
            border-left: 4px solid var(--lyt-yellow-muted);
        }

        .section-title {
            font-family: 'DM Mono', monospace;
            text-decoration: underline;
            color: var(--lyt-purple-deep);
            margin-bottom: 1rem;
            font-size: 1.1rem;
            cursor: pointer;
            position: relative;
            transition: color 0.2s ease, transform 0.2s ease;
            display: inline-block;
        }
        
        .section-title:hover {
            color: var(--lyt-purple-deep);
            transform: scale(1.025);
        }
        
        .section-title.canela-font {
            font-family: 'Canela Deck', serif;
            text-decoration: none;
        }
        
        .section-title.space-grotesk-font {
            font-family: 'Space Grotesk', sans-serif;
            text-decoration: none;
        }
        
        .section-title::after {
            content: ' ▼';
            font-size: 0.8rem;
            transition: transform 0.2s ease;
            display: inline;
            margin-left: 0.5rem;
        }
        
        .section-title.collapsed::after {
            transform: rotate(-90deg);
        }
        
        .section-content {
            font-size: 1rem;
            color: #4a5568;
            line-height: 1.6;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .section-content.collapsed {
            max-height: 0;
            margin-bottom: 0;
        }
        
        .section-content.expanded {
            max-height: 500px;
        }

        .section-content {
            font-size: 1rem;
            color: #4a5568;
            line-height: 1.6;
        }

        .detailed-analysis {
            margin: 3rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f0 100%);
            border-radius: 12px;
            border-left: 4px solid var(--lyt-purple);
        }

        .analysis-title {
            font-family: 'DM Mono', monospace;
            text-decoration: underline;
            color: var(--lyt-purple-deep);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .analysis-section {
            margin-bottom: 2rem;
        }

        .analysis-section:last-child {
            margin-bottom: 0;
        }

        .analysis-subheading {
            font-family: 'DM Mono', monospace;
            color: var(--lyt-purple-deep);
            font-weight: 500;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .analysis-content {
            font-size: 1.1rem;
            color: #4a5568;
            line-height: 1.6;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
            text-align: left;
        }

        .result-box {
            background: linear-gradient(135deg, #f8f9ff 0%, #fff5f0 100%);
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid var(--lyt-purple);
            position: relative;
            min-height: 200px;
        }

        .result-box.unlocked {
            border-left-color: var(--lyt-purple);
        }

        .result-box.teaser {
            border-left-color: #e2e8f0;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            opacity: 0.7;
        }

        .result-box h4 {
            font-family: 'Canela Deck', sans-serif;
            font-size: 1.2rem;
            color: var(--lyt-purple-deep);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-box.teaser h4 {
            color: #a0aec0;
        }

        .lock-icon {
            font-size: 1rem;
            opacity: 0.6;
        }

        .result-list {
            list-style: none;
            padding: 0;
        }

        .result-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(185, 173, 255, 0.1);
            position: relative;
            padding-left: 1.5rem;
            color: #4a5568;
        }

        .result-box.teaser .result-list li {
            color: #a0aec0;
        }

        .result-list li:last-child {
            border-bottom: none;
        }

        .result-list li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--lyt-purple);
            font-weight: bold;
        }

        .result-box.teaser .result-list li::before {
            color: #cbd5e0;
        }

        .blurred-content {
            filter: blur(8px);
            pointer-events: none;
            user-select: none;
        }

        .teaser-content {
            color: #a0aec0;
            font-style: italic;
            text-align: center;
            padding: 2rem 1rem;
        }

        .unlock-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--lyt-green);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .workshop-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--lyt-pink);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .teaser-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #f0d9e8;
            color: #8b5c77;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .chord-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .chord-diagram img {
            width: 300px;
            height: 300px;
            display: block;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .chord-diagram img:hover {
            transform: scale(1.05);
        }

        /* Modal styles for enlarged image */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            cursor: pointer;
        }

        .image-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-modal img {
            max-width: 60%;
            max-height: 70%;
            width: auto;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
        }

        .share-btn {
            background: linear-gradient(135deg, var(--lyt-purple) 0%, var(--lyt-cyan) 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            font-family: 'Space Grotesk', sans-serif;
            margin: 0.5rem;
            box-sizing: border-box;
            vertical-align: top;
            line-height: 1;
            height: auto;
            display: inline-block;
        }

        .share-btn:hover {
            transform: translateY(-2px);
        }

        .share-dropdown-container {
            position: relative;
            display: inline-block;
        }

        .share-dropdown {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border: 1px solid rgba(185, 173, 255, 0.3);
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            min-width: 200px;
            z-index: 1000;
        }

        .share-dropdown.show {
            display: block;
        }

        .share-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border: none;
            background: transparent;
            color: #2d3748;
            text-decoration: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            transition: background-color 0.2s ease;
        }

        .share-option:hover {
            background-color: #f7fafc;
        }

        .share-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .footer {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: white;
            padding: 3rem 1rem;
            text-align: center;
            margin-top: 3rem;
        }

        .footer h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--lyt-purple);
            margin-bottom: 1rem;
        }

        .footer p {
            margin-bottom: 1rem;
            opacity: 0.9;
            max-width: 42rem;
            margin-left: auto;
            margin-right: auto;
        }

        .footer a {
            color: var(--lyt-cyan);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer a:hover {
            color: var(--lyt-purple);
        }

        .footer-credits {
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            padding-top: 2rem;
            margin-top: 2rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .header {
                padding: 1.5rem 1rem;
            }

            .header-content {
                gap: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .logo {
                width: 60px;
                height: 60px;
            }

            .answers {
                grid-template-columns: 1fr 1fr;
                gap: 0.5rem;
            }

            .answer-btn {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }

            .container {
                padding: 1rem;
            }
            
            .second-row {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .profile-banner {
                padding: 1.5rem;
            }

            .banner-main-title {
                font-size: 1.2rem;
            }

            .banner-profile-code {
                font-size: 2rem;
            }

            .banner-subtitle {
                font-size: 1.4rem;
            }
        }

        @media (max-width: 480px) {
            .answers {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .results-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .results {
                padding: 2rem 1rem;
            }

            .chord-diagram img {
                width: 200px;
                height: 200px;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
                align-items: center;
            }

            .profile-info {
                text-align: center;
            }

            .profile-code {
                font-size: 2rem;
            }

            .tendency-description {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <img src="lyt-logo.png" alt="Linking Your Thinking" class="logo">
            <h1>Linking Your Thinking Presents...</h1>
        </div>
    </div>

    <div class="container">
        <!-- Email Capture Screen -->
        <div id="emailScreen" class="screen active">
            <div class="email-capture">
                <h2>Get Your Results</h2>
                <p>Enter your email to receive your personalized STTI results. We'll send you a detailed breakdown of your sensemaking type and suggestions for optimization.</p>
                <input type="email" id="emailInput" class="email-input" placeholder="Enter your email address">
                <br>
                <button id="startBtn" class="start-btn" disabled>Start Assessment</button>
            </div>
        </div>

        <!-- Assessment Screen -->
        <div id="assessmentScreen" class="screen">
            <div class="assessment">
                <div class="progress-section">
                    <div class="progress-text" id="progressText">Question 1 of 53</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>

                <div class="question-section">
                    <div class="question-text" id="questionText">Loading question...</div>
                    
                    <div class="answers">
                        <button class="answer-btn sd" onclick="selectAnswer('SD')">
                            <span>Strongly Disagree</span>
                        </button>
                        <button class="answer-btn d" onclick="selectAnswer('D')">
                            <span>Disagree</span>
                        </button>
                        <button class="answer-btn a" onclick="selectAnswer('A')">
                            <span>Agree</span>
                        </button>
                        <button class="answer-btn sa" onclick="selectAnswer('SA')">
                            <span>Strongly Agree</span>
                        </button>
                    </div>

                    <div class="navigation">
                        <button id="backBtn" class="nav-btn" onclick="goBack()">‹</button>
                        <button id="forwardBtn" class="nav-btn" onclick="goForward()">›</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="results">
                <!-- Main title above gradient -->
                <div class="profile-main-title">Your Sensemaking Profile</div>
                
                <!-- Profile Banner with Code and Subtitle -->
                <div class="profile-banner">
                    <div class="banner-profile-code" id="profileCode">IS-Architect</div>
                    <div class="banner-subtitle" id="profileSubtitle">The Philosopher</div>
                </div>
                
                <div class="profile-header">
                    <div class="chord-diagram">
                        <img id="chordDiagram" src="Clean_STTI_IP-Architect_Thin.png" alt="Your Sensemaking Pattern">
                    </div>
                    <div class="profile-info">
                        <div class="archetype-title">Archetypes</div>
                        <div class="archetype-pills-container">
                            <div class="archetype-pills primary-row">
                                <div class="archetype-pill inner-guide-pill" id="primaryArchetypePill">Inner Guide</div>
                                <div class="archetype-pill synthesizer-pill" id="secondaryArchetypePill">Synthesizer</div>
                            </div>
                            <div class="archetype-pills secondary-row">
                                <div class="archetype-pill producer-pill secondary-archetype" id="thirdArchetypePill">Producer</div>
                                <div class="archetype-pill creative-pill secondary-archetype" id="fourthArchetypePill">Creative</div>
                            </div>
                        </div>
                        <div class="archetype-description" id="archetypeDescription">
                            Your unique cognitive pattern reveals how you process information and navigate complexity.
                        </div>
                    </div>
                </div>
                
                <div class="second-row">
                    <div class="westerner-section">
                        <div class="westerner-title" id="westernerTitle">Orientation</div>
                        <div class="orientation-pill" id="orientationPill">Westerner</div>
                        <div class="westerner-description" id="westernerDescription">
                            Your westerner/easterner analysis will appear here.
                        </div>
                    </div>
                    <div class="tendency-section">
                        <div class="tendency-title">Tendency</div>
                        <div class="tendency-pills-container">
                            <div class="tendency-pill architect-pill" id="tendencyPill">Architect</div>
                            <div class="tendency-pill gardener-pill secondary-tendency" id="secondaryTendencyPill">Gardener</div>
                        </div>
                        <div class="tendency-description" id="tendencyDescription">
                            Your tendency description will appear here.
                        </div>
                    </div>
                </div>

                <!-- Action buttons (first set) -->
                <div style="margin: 3rem 0; text-align: center;">
                    <div class="share-dropdown-container">
                        <button class="share-btn" onclick="toggleShareDropdown(this)">Share Results ▼</button>
                        <div class="share-dropdown">
                            <button class="share-option" onclick="shareToTwitter()">
                                <span class="share-icon">🐦</span>
                                Share on X (Twitter)
                            </button>
                            <button class="share-option" onclick="copyResultsLink()">
                                <span class="share-icon">📋</span>
                                Copy Link
                            </button>
                            <button class="share-option" onclick="shareViaEmail()">
                                <span class="share-icon">✉️</span>
                                Share via Email
                            </button>
                        </div>
                    </div>
                    <a href="https://www.linkingyourthinking.com/workshop" target="_blank" class="share-btn" style="text-decoration: none;">Go Deeper</a>
                </div>

                <!-- Additional Analysis Sections -->
                <div class="overwhelmed-section" id="overwhelmedSection" style="display: none; position: relative;">
                    <div class="unlock-badge">Bonus</div>
                    <div class="section-title space-grotesk-font collapsed" onclick="toggleSection('overwhelmedContent', this)">When Westerners feel overwhelmed…</div>
                    <div class="section-content collapsed" id="overwhelmedContent">
                        They usually double-down on their strengths to analyze, when what they likely need more is to move from reflection to expression.
                    </div>
                </div>

                <div class="stuck-unstuck-section" id="stuckUnstuckSection" style="display: none; position: relative;">
                    <div class="unlock-badge">Bonus</div>
                    <div class="section-title space-grotesk-font collapsed" onclick="toggleSection('stuckUnstuckContent', this)">Getting stuck and unstuck as an IS-Architect</div>
                    <div class="section-content collapsed" id="stuckUnstuckContent">
                        When you combine your Westerner archetypes of Inner Guide and Synthesizer with an Architect tendency, we now can understand that it's most difficult to access your Creative archetype—yet that's exactly what you most need.
                        <br><br>
                        That said, since your tendency is to architect, the easiest way to move between the west (reflection) and the east (expression) is going to be by tapping into your Producer archetype, since it aligns with your more natural structured approach.
                    </div>
                </div>

                <div class="prompts-section" id="promptsSection" style="display: none; position: relative;">
                    <div class="unlock-badge">Bonus</div>
                    <div class="section-title space-grotesk-font collapsed" onclick="toggleSection('promptsContent', this)">Prompts to go from West to East as an IS-Architect</div>
                    <div class="section-content collapsed" id="promptsContent">
                        How can you tie your current activity or problem to a concrete outcome or goal? How can your Producer help pull your work along? Once your Producer is activated, you'll likely find it becomes easier to drop into your Creative archetype, allowing you to find unique ways to express the unique ideas you have as a westerner known for deep thoughts.
                    </div>
                </div>

                
                <div class="results-grid">
                    <!-- Unlocked: Core Strengths -->
                    <div class="result-box unlocked">
                        <div class="workshop-badge">Workshop</div>
                        <h4>Core Strengths</h4>
                        <ul class="result-list blurred-content" id="strengthsList">
                            <li>Lorem ipsum dolor sit amet consectetur</li>
                            <li>Adipiscing elit sed do eiusmod tempor</li>
                            <li>Incididunt ut labore et dolore magna</li>
                            <li>Aliqua enim ad minim veniam quis</li>
                        </ul>
                    </div>

                    <!-- Unlocked: Growth Areas -->
                    <div class="result-box unlocked">
                        <div class="workshop-badge">Workshop</div>
                        <h4>Growth Opportunities</h4>
                        <ul class="result-list blurred-content" id="weaknessesList">
                            <li>Nostrud exercitation ullamco laboris</li>
                            <li>Nisi ut aliquip ex ea commodo consequat</li>
                            <li>Duis aute irure dolor in reprehenderit</li>
                            <li>Voluptate velit esse cillum dolore</li>
                        </ul>
                    </div>
                </div>

                <!-- Action buttons -->
                <div style="margin: 3rem 0; text-align: center;">
                    <div class="share-dropdown-container">
                        <button class="share-btn" onclick="toggleShareDropdown(this)">Share Results ▼</button>
                        <div class="share-dropdown">
                            <button class="share-option" onclick="shareToTwitter()">
                                <span class="share-icon">🐦</span>
                                Share on X (Twitter)
                            </button>
                            <button class="share-option" onclick="copyResultsLink()">
                                <span class="share-icon">📋</span>
                                Copy Link
                            </button>
                            <button class="share-option" onclick="shareViaEmail()">
                                <span class="share-icon">✉️</span>
                                Share via Email
                            </button>
                        </div>
                    </div>
                    <a href="https://www.linkingyourthinking.com/workshop" target="_blank" class="share-btn" style="text-decoration: none;">Get More in the LYT Workshop</a>
                </div>

                <div class="results-grid">
                    <!-- Teaser: Moving to Producer -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> How to Access Your Producer Side</h4>
                        <div class="teaser-content">
                            Discover specific strategies to amplify your productive capabilities and overcome analysis paralysis...
                        </div>
                    </div>

                    <!-- Teaser: Accessing Gardener -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Developing Your Gardener Tendencies</h4>
                        <div class="teaser-content">
                            Learn how to embrace flexibility and spontaneity while maintaining your structured approach...
                        </div>
                    </div>

                    <!-- Teaser: Methods & Practices -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Personalized Methods & Practices</h4>
                        <div class="teaser-content">
                            Custom workflows, tools, and daily practices designed specifically for your type...
                        </div>
                    </div>

                    <!-- Teaser: Attributes -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Deep Personality Attributes</h4>
                        <div class="teaser-content">
                            Comprehensive analysis of your cognitive patterns, decision-making style, and mental models...
                        </div>
                    </div>

                    <!-- Teaser: Communication Style -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Things You Say & Communication Style</h4>
                        <div class="teaser-content">
                            Typical phrases, communication patterns, and how others perceive your unique perspective...
                        </div>
                    </div>

                    <!-- Teaser: Career Insights -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Career & Role Optimization</h4>
                        <div class="teaser-content">
                            Ideal work environments, team roles, and career paths that align with your sensemaking style...
                        </div>
                    </div>

                    <!-- Teaser: Stress & Recovery -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Stress Patterns & Recovery</h4>
                        <div class="teaser-content">
                            How your type experiences stress, early warning signs, and personalized recovery strategies...
                        </div>
                    </div>

                    <!-- Teaser: Learning Style -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Optimal Learning Strategies</h4>
                        <div class="teaser-content">
                            How you naturally process information and the most effective learning approaches for your type...
                        </div>
                    </div>

                    <!-- Teaser: Relationship Dynamics -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Relationship & Team Dynamics</h4>
                        <div class="teaser-content">
                            How you work with other types, potential conflicts, and strategies for better collaboration...
                        </div>
                    </div>

                    <!-- Teaser: Advanced Strategies -->
                    <div class="result-box teaser">
                        <div class="teaser-badge">Workshop</div>
                        <h4><span class="lock-icon">🔒</span> Advanced Development Strategies</h4>
                        <div class="teaser-content">
                            Next-level techniques for leveraging your strengths and expanding your sensemaking capabilities...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <h3>Educational Licensing & Research Opportunities</h3>
        <p>
            Interested in using the STTI Assessment in your classroom, research, or academic program? 
            This assessment is open for case studies, rigorous academic testing, and educational research initiatives.
        </p>
        <p>
            <a href="mailto:hello@linkingyourthinking.com">Contact us at hello@linkingyourthinking.com</a> 
            to inquire about classroom licenses, research partnerships, and institutional access.
        </p>
        <div class="footer-credits">
            © 2025 Linking Your Thinking. The STTI Assessment is proprietary and protected by copyright.<br>
            All rights reserved. | <a href="https://www.linkingyourthinking.com">linkingyourthinking.com</a>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <img id="modalImage" src="" alt="Enlarged Sensemaking Pattern">
    </div>

    <script>
        const questions = [
            { id: 1, text: "I am really satisfied when I create something that feels original to me.", archetype: 'C+' },
            { id: 2, text: "I naturally look at topics from many angles.", archetype: 'S+' },
            { id: 3, text: "I find working from detailed plans draining.", archetype: 'G+' },
            { id: 4, text: "I prefer to read summaries, not wade through a lot of information.", archetype: 'S-' },
            { id: 5, text: "I am energized by making progress on tasks.", archetype: 'P+' },
            { id: 6, text: "If I'm putting something together, I start building before opening the manual.", archetype: 'G+' },
            { id: 7, text: "I prefer novels over non-fiction.", archetype: 'RH' },
            { id: 8, text: "I feel satisfied when my explorations lead to something unexpected.", archetype: 'G+' },
            { id: 9, text: "I don't tend to reflect on my life experiences.", archetype: 'I-' },
            { id: 10, text: "I am willing to put in the work required for my ideas to have an impact on others.", archetype: 'C+' },
            { id: 11, text: "Working from detailed plans is energizing for me.", archetype: 'A+' },
            { id: 12, text: "I am not particularly interested in abstract ideas.", archetype: 'S-' },
            { id: 13, text: "I find exploring without a set path energizing.", archetype: 'G+' },
            { id: 14, text: "I have a hard time making progress on my goals.", archetype: 'P-' },
            { id: 15, text: "Taking action on what I learn is important to me.", archetype: 'P+' },
            { id: 16, text: "I am drained by reflecting on my life.", archetype: 'I-' },
            { id: 17, text: "I rarely share my ideas with others.", archetype: 'C-' },
            { id: 18, text: "Mapping out everything ahead of time helps me focus on what matters.", archetype: 'A+' },
            { id: 19, text: "I prefer classic literature over sci-fi or fantasy.", archetype: 'RH' },
            { id: 20, text: "I feel really satisfied when I get a lot of things done in a day.", archetype: 'P+' },
            { id: 21, text: "I dive in without a plan when starting a new project.", archetype: 'G+' },
            { id: 22, text: "I'm more extrovert than introvert.", archetype: 'RH' },
            { id: 23, text: "I find exploring topics in depth energizing.", archetype: 'S+' },
            { id: 24, text: "Creating something original doesn't give me particular satisfaction.", archetype: 'C-' },
            { id: 25, text: "Having a clear plan at the start of something new is important to me.", archetype: 'A+' },
            { id: 26, text: "I am not particularly interested in personal reflection.", archetype: 'I-' },
            { id: 27, text: "I am energized by expressing my unique perspective.", archetype: 'C+' },
            { id: 28, text: "If I'm putting something together, I read the manual first.", archetype: 'A+' },
            { id: 29, text: "There will always be more to do. I don't stress about getting stuff done.", archetype: 'P-' },
            { id: 30, text: "I often spend time reflecting on my life experiences.", archetype: 'I+' },
            { id: 31, text: "Being able to do something with my learning isn't that important to me.", archetype: 'P-' },
            { id: 32, text: "I am really satisfied when I make sense out of complex information.", archetype: 'S+' },
            { id: 33, text: "Exploring without a set path drains me.", archetype: 'A+' },
            { id: 34, text: "I find expressing my unique perspective draining.", archetype: 'C-' },
            { id: 35, text: "I consistently take action on the tasks and plans of the day.", archetype: 'P+' },
            { id: 36, text: "Trying to map out everything ahead of time is a waste of time.", archetype: 'G+' },
            { id: 37, text: "I prefer a mountain hike rather than a beach stroll.", archetype: 'RH' },
            { id: 38, text: "I feel satisfied when I execute a well-structured plan.", archetype: 'A+' },
            { id: 39, text: "I enjoy working with a lot of information.", archetype: 'S+' },
            { id: 40, text: "I am not particularly interested in taking detours without a high-level picture.", archetype: 'A+' },
            { id: 41, text: "I think introspection is overrated. I'm content to take life as it comes.", archetype: 'I-' },
            { id: 42, text: "Executing a structured plan doesn't appeal to me.", archetype: 'G+' },
            { id: 43, text: "I find working on tasks draining.", archetype: 'P-' },
            { id: 44, text: "Having flexibility at the start of something new is important to me.", archetype: 'G+' },
            { id: 45, text: "I feel really satisfied when I am making sense of my life.", archetype: 'I+' },
            { id: 46, text: "I'm more introvert than extrovert.", archetype: 'RH' },
            { id: 47, text: "I often share my ideas with others.", archetype: 'C+' },
            { id: 48, text: "While it would be nice to impact others with my original creations, I have more pressing priorities.", archetype: 'C-' },
            { id: 49, text: "I am drained by exploring topics in depth.", archetype: 'S-' },
            { id: 50, text: "When beginning a new project, I usually start by making a plan.", archetype: 'A+' },
            { id: 51, text: "I feel a strong need to think about my values and what really matters to me.", archetype: 'I+' },
            { id: 52, text: "I find reflecting on my life energizing.", archetype: 'I+' },
            { id: 53, text: "I don't feel the need to exhaustively explore an idea.", archetype: 'S-' }
        ];

        let currentQuestion = 0;
        let answers = {};
        let userEmail = '';

        // Check for email in URL params or localStorage
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const emailFromURL = urlParams.get('email');
            const emailFromStorage = localStorage.getItem('userEmail');
            
            const prefilledEmail = emailFromURL || emailFromStorage || '';
            if (prefilledEmail) {
                document.getElementById('emailInput').value = prefilledEmail;
                userEmail = prefilledEmail;
                // Enable start button if email is valid
                if (prefilledEmail.includes('@') && prefilledEmail.length > 5) {
                    document.getElementById('startBtn').disabled = false;
                }
            }
        })();

        // Email validation and start
        const emailInput = document.getElementById('emailInput');
        const startBtn = document.getElementById('startBtn');

        emailInput.addEventListener('input', function() {
            const email = this.value;
            const isValid = email.includes('@') && email.length > 5;
            startBtn.disabled = !isValid;
            // Save to localStorage for persistence
            if (email) {
                localStorage.setItem('userEmail', email);
            }
        });

        startBtn.addEventListener('click', function() {
            userEmail = emailInput.value;
            showScreen('assessmentScreen');
            loadQuestion();
        });

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function updateNavButtons() {
            const backBtn = document.getElementById('backBtn');
            const forwardBtn = document.getElementById('forwardBtn');
            
            backBtn.disabled = currentQuestion === 0;
            forwardBtn.disabled = !answers[currentQuestion];
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = question.text;
            document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            highlightSelectedAnswer();
            updateNavButtons();
        }

        function highlightSelectedAnswer() {
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.style.opacity = '1';
                btn.style.transform = 'scale(1)';
            });
            
            if (answers[currentQuestion]) {
                const selectedBtn = document.querySelector(`[onclick="selectAnswer('${answers[currentQuestion].answer}')"]`);
                if (selectedBtn) {
                    selectedBtn.style.opacity = '0.8';
                    selectedBtn.style.transform = 'scale(0.95)';
                }
            }
        }

        function selectAnswer(response) {
            answers[currentQuestion] = {
                questionId: questions[currentQuestion].id,
                answer: response,
                archetype: questions[currentQuestion].archetype
            };
            
            // Visual feedback
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.style.transform = 'scale(1)';
            });
            
            const selectedBtn = event.target.closest('.answer-btn');
            if (selectedBtn) {
                selectedBtn.style.transform = 'scale(0.95)';
            }

            updateNavButtons();
            
            // Auto-advance after a short delay
            if (currentQuestion < questions.length - 1) {
                setTimeout(() => {
                    currentQuestion++;
                    loadQuestion();
                }, 400);
            } else {
                setTimeout(() => {
                    showResults();
                }, 400);
            }
        }

        function goBack() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function goForward() {
            if (currentQuestion < questions.length - 1 && answers[currentQuestion]) {
                currentQuestion++;
                loadQuestion();
            } else if (currentQuestion === questions.length - 1 && answers[currentQuestion]) {
                showResults();
            }
        }

        function calculateScores() {
            const scores = { I: 0, S: 0, P: 0, C: 0, A: 0, G: 0 };
            
            Object.values(answers).forEach(answer => {
                if (answer.archetype === 'RH') return; // Skip red herrings
                
                const archetype = answer.archetype.substring(0, 1);
                const polarity = answer.archetype.substring(1);
                
                let score = 0;
                switch (answer.answer) {
                    case 'SD': score = polarity === '+' ? 1 : 4; break;
                    case 'D': score = polarity === '+' ? 2 : 3; break;
                    case 'A': score = polarity === '+' ? 3 : 2; break;
                    case 'SA': score = polarity === '+' ? 4 : 1; break;
                }
                
                scores[archetype] += score;
            });
            
            return scores;
        }

        function determineProfile(scores) {
            // Get all 4 archetypes sorted by score (highest to lowest)
            const archetypeScores = [
                ['I', scores.I], ['S', scores.S], ['P', scores.P], ['C', scores.C]
            ].sort((a, b) => b[1] - a[1]);
            
            // Determine tendency
            const tendency = scores.A > scores.G ? 'Architect' : 'Gardener';
            
            const dominantArchetypes = [archetypeScores[0][0], archetypeScores[1][0]];
            const code = dominantArchetypes.join('') + '-' + tendency;
            
            return { code, dominantArchetypes, tendency, scores, archetypeScores };
        }

        async function submitToFormspree(profile) {
            try {
                const response = await fetch('https://formspree.io/f/xvgblrvw', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: userEmail,
                        profile_code: profile.code,
                        dominant_archetypes: profile.dominantArchetypes.join(' & '),
                        tendency: profile.tendency,
                        scores: profile.scores,
                        timestamp: new Date().toISOString(),
                        answers: Object.values(answers).map(answer => ({
                            question_id: answer.questionId,
                            question_text: questions.find(q => q.id === answer.questionId)?.text,
                            answer: answer.answer,
                            archetype: answer.archetype
                        }))
                    })
                });
                
                if (response.ok) {
                    console.log('Data submitted to Formspree successfully');
                } else {
                    console.error('Failed to submit to Formspree');
                }
            } catch (error) {
                console.error('Error submitting to Formspree:', error);
            }
        }

        function showResults() {
            const scores = calculateScores();
            const profile = determineProfile(scores);
            
            // Submit to Formspree
            submitToFormspree(profile);
            
            // Update results display
            document.getElementById('profileCode').textContent = profile.code;
            
            const archetypeNames = {
                'I': 'Inner Guide',
                'S': 'Synthesizer', 
                'P': 'Producer',
                'C': 'Creative'
            };

            const archetypeDescriptions = {
                'I': 'naturally focus on things that you find intrinsically meaningful',
                'S': 'having a desire to deeply make sense of those things',
                'P': 'being energized by taking action and making progress on meaningful work',
                'C': 'expressing your unique perspective and creating original contributions'
            };

            const tendencyDescriptions = {
                'Architect': 'gravitate towards structuring and organizing the things around you. However, it doesn\'t mean the things around you are organized, only that you prefer clarity and understanding over uncertainty, but sometimes even…opportunities.',
                'Gardener': 'prefer flexibility and emergent approaches, allowing ideas and projects to develop organically. You thrive in ambiguous situations and are comfortable navigating uncertainty, often discovering unexpected opportunities through exploration.'
            };
            
            // Use score-based rankings for all archetype positions
            const primaryArchetype = archetypeNames[profile.archetypeScores[0][0]];
            const secondaryArchetype = archetypeNames[profile.archetypeScores[1][0]];
            const primaryDesc = archetypeDescriptions[profile.archetypeScores[0][0]];
            const secondaryDesc = archetypeDescriptions[profile.archetypeScores[1][0]];
            const tendencyDesc = tendencyDescriptions[profile.tendency];
            
            // Update archetype pills
            document.getElementById('primaryArchetypePill').textContent = primaryArchetype;
            document.getElementById('secondaryArchetypePill').textContent = secondaryArchetype;
            
            // Update pill classes based on archetype types
            const primaryPill = document.getElementById('primaryArchetypePill');
            const secondaryPill = document.getElementById('secondaryArchetypePill');
            
            // Reset classes
            primaryPill.className = 'archetype-pill';
            secondaryPill.className = 'archetype-pill';
            
            // Add appropriate color classes
            if (primaryArchetype === 'Inner Guide') primaryPill.classList.add('inner-guide-pill');
            else if (primaryArchetype === 'Synthesizer') primaryPill.classList.add('synthesizer-pill');
            else if (primaryArchetype === 'Producer') primaryPill.classList.add('producer-pill');
            else if (primaryArchetype === 'Creative') primaryPill.classList.add('creative-pill');
            
            if (secondaryArchetype === 'Inner Guide') secondaryPill.classList.add('inner-guide-pill');
            else if (secondaryArchetype === 'Synthesizer') secondaryPill.classList.add('synthesizer-pill');
            else if (secondaryArchetype === 'Producer') secondaryPill.classList.add('producer-pill');
            else if (secondaryArchetype === 'Creative') secondaryPill.classList.add('creative-pill');
            
            // Update third and fourth archetype pills using actual score rankings
            const thirdArchetype = archetypeNames[profile.archetypeScores[2][0]];
            const fourthArchetype = archetypeNames[profile.archetypeScores[3][0]];
            
            const thirdPill = document.getElementById('thirdArchetypePill');
            const fourthPill = document.getElementById('fourthArchetypePill');
            
            thirdPill.textContent = thirdArchetype;
            fourthPill.textContent = fourthArchetype;
            
            // Reset and add classes for third pill
            thirdPill.className = 'archetype-pill secondary-archetype';
            if (thirdArchetype === 'Inner Guide') thirdPill.classList.add('inner-guide-pill');
            else if (thirdArchetype === 'Synthesizer') thirdPill.classList.add('synthesizer-pill');
            else if (thirdArchetype === 'Producer') thirdPill.classList.add('producer-pill');
            else if (thirdArchetype === 'Creative') thirdPill.classList.add('creative-pill');
            
            // Reset and add classes for fourth pill
            fourthPill.className = 'archetype-pill secondary-archetype';
            if (fourthArchetype === 'Inner Guide') fourthPill.classList.add('inner-guide-pill');
            else if (fourthArchetype === 'Synthesizer') fourthPill.classList.add('synthesizer-pill');
            else if (fourthArchetype === 'Producer') fourthPill.classList.add('producer-pill');
            else if (fourthArchetype === 'Creative') fourthPill.classList.add('creative-pill');
            
            document.getElementById('archetypeDescription').innerHTML = 
                `The <strong>${primaryArchetype}</strong> is your dominant sensemaking archetype, followed by the <strong>${secondaryArchetype}</strong>. This means you ${primaryDesc}, along with ${secondaryDesc}.`;
            
            // Update tendency pill
            const tendencyPill = document.getElementById('tendencyPill');
            tendencyPill.textContent = profile.tendency;
            tendencyPill.className = 'tendency-pill ' + (profile.tendency === 'Architect' ? 'architect-pill' : 'gardener-pill');
            
            // Update secondary tendency pill (show opposite tendency)
            const secondaryTendencyPill = document.getElementById('secondaryTendencyPill');
            const secondaryTendency = profile.tendency === 'Architect' ? 'Gardener' : 'Architect';
            secondaryTendencyPill.textContent = secondaryTendency;
            secondaryTendencyPill.className = 'tendency-pill secondary-tendency ' + (secondaryTendency === 'Architect' ? 'architect-pill' : 'gardener-pill');
            
            document.getElementById('tendencyDescription').innerHTML = 
                `The <strong>${profile.tendency}</strong> is your dominant sensemaking tendency. This means you ${tendencyDesc}`;
            
            // Determine orientation based on archetype combinations
            const archetypes = profile.dominantArchetypes.sort().join('');
            let orientation = '';
            
            if (archetypes === 'IS' || archetypes === 'SI') {
                orientation = 'Westerner';
            } else if (archetypes === 'CP' || archetypes === 'PC') {
                orientation = 'Easterner';
            } else if (archetypes === 'PS' || archetypes === 'SP') {
                orientation = 'Northerner';
            } else if (archetypes === 'CI' || archetypes === 'IC') {
                orientation = 'Southerner';
            } else if (archetypes === 'CS' || archetypes === 'SC') {
                orientation = 'Diagonal';
            } else if (archetypes === 'IP' || archetypes === 'PI') {
                orientation = 'Diagonal';
            } else {
                orientation = 'Mixed';
            }
            
            // Legacy variables for backward compatibility
            const isWesterner = (orientation === 'Westerner');
            const isEasterner = (orientation === 'Easterner');
            
            const westernerTitle = document.getElementById('westernerTitle');
            const westernerDescription = document.getElementById('westernerDescription');
            
            // Update identity title, subtitle and description
            const westernerSubtitle = document.getElementById('westernerSubtitle');
            
            // Update profile subtitle (The Philosopher, The Maker, etc.)
            const profileSubtitle = document.getElementById('profileSubtitle');
            
            if (archetypes === 'IS' || archetypes === 'SI') {
                profileSubtitle.textContent = 'The Philosopher';
            } else if (archetypes === 'CP' || archetypes === 'PC') {
                profileSubtitle.textContent = 'The Maker';
            } else if (archetypes === 'PS' || archetypes === 'SP') {
                profileSubtitle.textContent = 'The Builder';
            } else if (archetypes === 'CI' || archetypes === 'IC') {
                profileSubtitle.textContent = 'The Explorer';
            } else if (archetypes === 'CS' || archetypes === 'SC') {
                profileSubtitle.textContent = 'The Translator';
            } else if (archetypes === 'IP' || archetypes === 'PI') {
                profileSubtitle.textContent = 'The Converter';
            } else {
                profileSubtitle.textContent = 'The Sensemaker';
            }
            
            // Update orientation pill
            const orientationPill = document.getElementById('orientationPill');
            orientationPill.textContent = orientation;
            
            if (isWesterner) {
                westernerTitle.textContent = 'Orientation';
                westernerDescription.innerHTML = `As an <strong>${profile.code}</strong>, you have a <strong>Westerner</strong> profile with a tendency to <strong>${profile.tendency.toLowerCase()}</strong> (notice how the image is predominantly focused on the western side). Westerners are known as "philosophers." They often get stuck reflecting and ruminating, and have difficulty moving from thinking to doing.`;
            } else if (isEasterner) {
                westernerTitle.textContent = 'Orientation';
                westernerDescription.innerHTML = 'Easterners often get stuck going from expression to reflection, from outward orientation to inward, from doing to thinking. But when Easterners feel overwhelmed, the answer is usually to do less action and more reflection.';
            } else {
                westernerTitle.textContent = 'Orientation';
                westernerDescription.innerHTML = 'Your profile combines both reflective and expressive tendencies, giving you flexibility to move between different modes of sensemaking as needed.';
            }
            
            // Show additional sections for IS-Architect
            const overwhelmedSection = document.getElementById('overwhelmedSection');
            const stuckUnstuckSection = document.getElementById('stuckUnstuckSection');
            const promptsSection = document.getElementById('promptsSection');
            
            if (profile.code === 'IS-Architect') {
                overwhelmedSection.style.display = 'block';
                stuckUnstuckSection.style.display = 'block';
                promptsSection.style.display = 'block';
            } else {
                overwhelmedSection.style.display = 'none';
                stuckUnstuckSection.style.display = 'none';
                promptsSection.style.display = 'none';
            }
            
            // Update chord diagram image
            const chordImage = document.getElementById('chordDiagram');
            chordImage.src = `Clean_STTI_${profile.code}_Thin.png`;
            chordImage.alt = `${profile.code} Sensemaking Pattern`;
            
            showScreen('resultsScreen');
        }

        function shareResults() {
            const profileCode = document.getElementById('profileCode').textContent;
            const shareText = `I just discovered I'm a ${profileCode} on the STTI Assessment! Find out your sensemaking type at https://nickmilo.github.io/stti-assessment/`;
            
            if (navigator.share) {
                navigator.share({
                    title: `I'm a ${profileCode}! - STTI Assessment`,
                    text: shareText,
                    url: 'https://nickmilo.github.io/stti-assessment/'
                }).catch(err => console.log('Error sharing:', err));
            } else if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText)
                    .then(() => alert('Share text copied to clipboard!'))
                    .catch(() => alert('Unable to copy to clipboard'));
            } else {
                alert(shareText);
            }
        }

        function toggleShareDropdown(button) {
            const dropdown = button.nextElementSibling;
            const isVisible = dropdown.classList.contains('show');
            
            // Close all other dropdowns first
            document.querySelectorAll('.share-dropdown.show').forEach(d => {
                d.classList.remove('show');
            });
            
            // Toggle current dropdown
            if (!isVisible) {
                dropdown.classList.add('show');
            }
        }

        function shareToTwitter() {
            const profileCode = document.getElementById('profileCode').textContent;
            const subtitle = document.getElementById('profileSubtitle').textContent;
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`I just discovered I'm an ${profileCode} - ${subtitle}! Find out your sensemaking type:`);
            
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
            closeAllDropdowns();
        }


        function copyResultsLink() {
            const url = window.location.href;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(url)
                    .then(() => {
                        alert('Link copied to clipboard!');
                        closeAllDropdowns();
                    })
                    .catch(() => {
                        alert('Unable to copy to clipboard');
                        closeAllDropdowns();
                    });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert('Link copied to clipboard!');
                } catch (err) {
                    alert('Unable to copy to clipboard');
                }
                document.body.removeChild(textArea);
                closeAllDropdowns();
            }
        }

        function shareViaEmail() {
            const profileCode = document.getElementById('profileCode').textContent;
            const subtitle = document.getElementById('profileSubtitle').textContent;
            const url = window.location.href;
            const subject = encodeURIComponent(`Check out my STTI Assessment results!`);
            const body = encodeURIComponent(`I just discovered I'm an ${profileCode} - ${subtitle}! Find out your sensemaking type at: ${url}`);
            
            window.open(`mailto:?subject=${subject}&body=${body}`, '_blank');
            closeAllDropdowns();
        }

        function closeAllDropdowns() {
            document.querySelectorAll('.share-dropdown.show').forEach(dropdown => {
                dropdown.classList.remove('show');
            });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.share-dropdown-container')) {
                closeAllDropdowns();
            }
        });

        function toggleSection(contentId, titleElement) {
            const content = document.getElementById(contentId);
            const isCollapsed = content.classList.contains('collapsed');
            
            if (isCollapsed) {
                // Expand
                content.classList.remove('collapsed');
                content.classList.add('expanded');
                titleElement.classList.remove('collapsed');
            } else {
                // Collapse
                content.classList.remove('expanded');
                content.classList.add('collapsed');
                titleElement.classList.add('collapsed');
            }
        }


        // Profile code mappings for quick testing (4-digit codes for safety)
        const profileMappings = {
            '0001': 'IP-Architect', '0002': 'IP-Gardener', '0003': 'IS-Architect', '0004': 'IS-Gardener', 
            '0005': 'IC-Architect', '0006': 'IC-Gardener', '0007': 'PI-Architect', '0008': 'PI-Gardener',
            '0009': 'PS-Architect', '0010': 'PS-Gardener', '0011': 'PC-Architect', '0012': 'PC-Gardener',
            '0013': 'SI-Architect', '0014': 'SI-Gardener', '0015': 'SP-Architect', '0016': 'SP-Gardener',
            '0017': 'SC-Architect', '0018': 'SC-Gardener', '0019': 'CI-Architect', '0020': 'CI-Gardener',
            '0021': 'CP-Architect', '0022': 'CP-Gardener', '0023': 'CS-Architect', '0024': 'CS-Gardener'
        };

        let keySequence = '';
        let keyTimer = null;

        // Debug shortcuts: Four-digit codes (0001-0024) for specific profiles
        document.addEventListener('keydown', function(event) {
            if (event.key >= '0' && event.key <= '9') {
                // Build four-digit sequence
                keySequence += event.key;
                
                // Clear any existing timer
                if (keyTimer) clearTimeout(keyTimer);
                
                // Set timer to reset sequence after 2 seconds
                keyTimer = setTimeout(() => {
                    keySequence = '';
                }, 2000);
                
                // Check if we have a valid four-digit code
                if (keySequence.length === 4 && profileMappings[keySequence]) {
                    const targetProfile = profileMappings[keySequence];
                    showTestResults(targetProfile);
                    keySequence = ''; // Reset
                    clearTimeout(keyTimer);
                } else if (keySequence.length > 4) {
                    // Reset if too many digits
                    keySequence = '';
                    clearTimeout(keyTimer);
                }
            }
        });

        function showTestResults(targetProfile) {
            userEmail = 'test@example.com';
            
            // Show specific profile
            const [archetypes, tendency] = targetProfile.split('-');
            const primary = archetypes[0];
            const secondary = archetypes[1];
            
            // Create mock profile object
            const mockProfile = {
                code: targetProfile,
                dominantArchetypes: [primary, secondary],
                tendency: tendency,
                scores: { I: 20, S: 15, P: 18, C: 12, A: tendency === 'Architect' ? 25 : 15, G: tendency === 'Gardener' ? 25 : 15 }
            };
            
            // Fill answers with sample data
            for (let i = 0; i < 48; i++) {
                answers[i] = {
                    questionId: questions[i].id,
                    answer: 'A',
                    archetype: questions[i].archetype
                };
            }
            
            // Directly show the specific profile
            showSpecificProfile(mockProfile);
        }

        function showSpecificProfile(profile) {
            // Update results display with specific profile
            document.getElementById('profileCode').textContent = profile.code;
            
            const archetypeNames = {
                'I': 'Inner Guide',
                'S': 'Synthesizer', 
                'P': 'Producer',
                'C': 'Creative'
            };

            const archetypeDescriptions = {
                'I': 'naturally focus on things that you find intrinsically meaningful',
                'S': 'having a desire to deeply make sense of those things',
                'P': 'being energized by taking action and making progress on meaningful work',
                'C': 'expressing your unique perspective and creating original contributions'
            };

            const tendencyDescriptions = {
                'Architect': 'gravitate towards structuring and organizing the things around you. However, it doesn\'t mean the things around you are organized, only that you prefer clarity and understanding over uncertainty, but sometimes even…opportunities.',
                'Gardener': 'prefer flexibility and emergent approaches, allowing ideas and projects to develop organically. You thrive in ambiguous situations and are comfortable navigating uncertainty, often discovering unexpected opportunities through exploration.'
            };
            
            // Use score-based rankings for all archetype positions
            const primaryArchetype = archetypeNames[profile.archetypeScores[0][0]];
            const secondaryArchetype = archetypeNames[profile.archetypeScores[1][0]];
            const primaryDesc = archetypeDescriptions[profile.archetypeScores[0][0]];
            const secondaryDesc = archetypeDescriptions[profile.archetypeScores[1][0]];
            const tendencyDesc = tendencyDescriptions[profile.tendency];
            
            // Update archetype pills
            document.getElementById('primaryArchetypePill').textContent = primaryArchetype;
            document.getElementById('secondaryArchetypePill').textContent = secondaryArchetype;
            
            // Update pill classes based on archetype types
            const primaryPill = document.getElementById('primaryArchetypePill');
            const secondaryPill = document.getElementById('secondaryArchetypePill');
            
            // Reset classes
            primaryPill.className = 'archetype-pill';
            secondaryPill.className = 'archetype-pill';
            
            // Add appropriate color classes
            if (primaryArchetype === 'Inner Guide') primaryPill.classList.add('inner-guide-pill');
            else if (primaryArchetype === 'Synthesizer') primaryPill.classList.add('synthesizer-pill');
            else if (primaryArchetype === 'Producer') primaryPill.classList.add('producer-pill');
            else if (primaryArchetype === 'Creative') primaryPill.classList.add('creative-pill');
            
            if (secondaryArchetype === 'Inner Guide') secondaryPill.classList.add('inner-guide-pill');
            else if (secondaryArchetype === 'Synthesizer') secondaryPill.classList.add('synthesizer-pill');
            else if (secondaryArchetype === 'Producer') secondaryPill.classList.add('producer-pill');
            else if (secondaryArchetype === 'Creative') secondaryPill.classList.add('creative-pill');
            
            // Update third and fourth archetype pills using actual score rankings
            const thirdArchetype = archetypeNames[profile.archetypeScores[2][0]];
            const fourthArchetype = archetypeNames[profile.archetypeScores[3][0]];
            
            const thirdPill = document.getElementById('thirdArchetypePill');
            const fourthPill = document.getElementById('fourthArchetypePill');
            
            thirdPill.textContent = thirdArchetype;
            fourthPill.textContent = fourthArchetype;
            
            // Reset and add classes for third pill
            thirdPill.className = 'archetype-pill secondary-archetype';
            if (thirdArchetype === 'Inner Guide') thirdPill.classList.add('inner-guide-pill');
            else if (thirdArchetype === 'Synthesizer') thirdPill.classList.add('synthesizer-pill');
            else if (thirdArchetype === 'Producer') thirdPill.classList.add('producer-pill');
            else if (thirdArchetype === 'Creative') thirdPill.classList.add('creative-pill');
            
            // Reset and add classes for fourth pill
            fourthPill.className = 'archetype-pill secondary-archetype';
            if (fourthArchetype === 'Inner Guide') fourthPill.classList.add('inner-guide-pill');
            else if (fourthArchetype === 'Synthesizer') fourthPill.classList.add('synthesizer-pill');
            else if (fourthArchetype === 'Producer') fourthPill.classList.add('producer-pill');
            else if (fourthArchetype === 'Creative') fourthPill.classList.add('creative-pill');
            
            document.getElementById('archetypeDescription').innerHTML = 
                `The <strong>${primaryArchetype}</strong> is your dominant sensemaking archetype, followed by the <strong>${secondaryArchetype}</strong>. This means you ${primaryDesc}, along with ${secondaryDesc}.`;
            
            // Update tendency pill
            const tendencyPill = document.getElementById('tendencyPill');
            tendencyPill.textContent = profile.tendency;
            tendencyPill.className = 'tendency-pill ' + (profile.tendency === 'Architect' ? 'architect-pill' : 'gardener-pill');
            
            // Update secondary tendency pill (show opposite tendency)
            const secondaryTendencyPill = document.getElementById('secondaryTendencyPill');
            const secondaryTendency = profile.tendency === 'Architect' ? 'Gardener' : 'Architect';
            secondaryTendencyPill.textContent = secondaryTendency;
            secondaryTendencyPill.className = 'tendency-pill secondary-tendency ' + (secondaryTendency === 'Architect' ? 'architect-pill' : 'gardener-pill');
            
            document.getElementById('tendencyDescription').innerHTML = 
                `The <strong>${profile.tendency}</strong> is your dominant sensemaking tendency. This means you ${tendencyDesc}`;
            
            // Determine orientation based on archetype combinations
            const archetypes = profile.dominantArchetypes.sort().join('');
            let orientation = '';
            
            if (archetypes === 'IS' || archetypes === 'SI') {
                orientation = 'Westerner';
            } else if (archetypes === 'CP' || archetypes === 'PC') {
                orientation = 'Easterner';
            } else if (archetypes === 'PS' || archetypes === 'SP') {
                orientation = 'Northerner';
            } else if (archetypes === 'CI' || archetypes === 'IC') {
                orientation = 'Southerner';
            } else if (archetypes === 'CS' || archetypes === 'SC') {
                orientation = 'Diagonal';
            } else if (archetypes === 'IP' || archetypes === 'PI') {
                orientation = 'Diagonal';
            } else {
                orientation = 'Mixed';
            }
            
            // Legacy variables for backward compatibility
            const isWesterner = (orientation === 'Westerner');
            const isEasterner = (orientation === 'Easterner');
            
            const westernerTitle = document.getElementById('westernerTitle');
            const westernerDescription = document.getElementById('westernerDescription');
            
            // Update identity title, subtitle and description
            const westernerSubtitle = document.getElementById('westernerSubtitle');
            
            // Update profile subtitle (The Philosopher, The Maker, etc.)
            const profileSubtitle = document.getElementById('profileSubtitle');
            
            if (archetypes === 'IS' || archetypes === 'SI') {
                profileSubtitle.textContent = 'The Philosopher';
            } else if (archetypes === 'CP' || archetypes === 'PC') {
                profileSubtitle.textContent = 'The Maker';
            } else if (archetypes === 'PS' || archetypes === 'SP') {
                profileSubtitle.textContent = 'The Builder';
            } else if (archetypes === 'CI' || archetypes === 'IC') {
                profileSubtitle.textContent = 'The Explorer';
            } else if (archetypes === 'CS' || archetypes === 'SC') {
                profileSubtitle.textContent = 'The Translator';
            } else if (archetypes === 'IP' || archetypes === 'PI') {
                profileSubtitle.textContent = 'The Converter';
            } else {
                profileSubtitle.textContent = 'The Sensemaker';
            }
            
            // Update orientation pill
            const orientationPill = document.getElementById('orientationPill');
            orientationPill.textContent = orientation;
            
            if (isWesterner) {
                westernerTitle.textContent = 'Orientation';
                westernerDescription.innerHTML = `As an <strong>${profile.code}</strong>, you have a <strong>Westerner</strong> profile with a tendency to <strong>${profile.tendency.toLowerCase()}</strong> (notice how the image is predominantly focused on the western side). Westerners are known as "philosophers." They often get stuck reflecting and ruminating, and have difficulty moving from thinking to doing.`;
            } else if (isEasterner) {
                westernerTitle.textContent = 'Orientation';
                westernerDescription.innerHTML = 'Easterners often get stuck going from expression to reflection, from outward orientation to inward, from doing to thinking. But when Easterners feel overwhelmed, the answer is usually to do less action and more reflection.';
            } else {
                westernerTitle.textContent = 'Orientation';
                westernerDescription.innerHTML = 'Your profile combines both reflective and expressive tendencies, giving you flexibility to move between different modes of sensemaking as needed.';
            }
            
            // Show additional sections for IS-Architect
            const overwhelmedSection = document.getElementById('overwhelmedSection');
            const stuckUnstuckSection = document.getElementById('stuckUnstuckSection');
            const promptsSection = document.getElementById('promptsSection');
            
            // Update detailed analysis
            
            if (profile.code === 'IS-Architect') {
                overwhelmedSection.style.display = 'block';
                stuckUnstuckSection.style.display = 'block';
                promptsSection.style.display = 'block';
            } else {
                overwhelmedSection.style.display = 'none';
                stuckUnstuckSection.style.display = 'none';
                promptsSection.style.display = 'none';
            }
            
            // Update chord diagram image
            const chordImage = document.getElementById('chordDiagram');
            chordImage.src = `Clean_STTI_${profile.code}_Thin.png`;
            chordImage.alt = `${profile.code} Sensemaking Pattern`;
            
            showScreen('resultsScreen');
        }

        // Image modal functionality
        document.addEventListener('click', function(event) {
            // Check if clicked on chord diagram
            if (event.target.id === 'chordDiagram') {
                const modal = document.getElementById('imageModal');
                const modalImage = document.getElementById('modalImage');
                modalImage.src = event.target.src;
                modal.classList.add('active');
            }
            
            // Close modal when clicking anywhere on it
            if (event.target.closest('#imageModal')) {
                document.getElementById('imageModal').classList.remove('active');
            }
        });
    </script>
</body>
</html>